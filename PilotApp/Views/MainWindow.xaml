<ui:FluentWindow
    x:Class="PilotApp.Views.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    Title="Pilot - Gestion des ventes"
    Width="1200"
    Height="800"
    Loaded="MainWindow_Loaded"
    WindowStartupLocation="CenterScreen">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!--  Barre de titre personnalisée  -->
        <Border
            Grid.Row="0"
            Height="60"
            Background="#FF1976D2">
            <Grid Margin="0,0,40,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <StackPanel
                    Grid.Column="0"
                    Margin="20,0"
                    VerticalAlignment="Center"
                    Orientation="Horizontal">
                    <TextBlock
                        VerticalAlignment="Center"
                        FontSize="20"
                        FontWeight="Bold"
                        Foreground="White"
                        Text="PILOT" />
                    <TextBlock
                        VerticalAlignment="Center"
                        FontSize="14"
                        Foreground="White"
                        Opacity="0.8"
                        Text=" - Gestion des ventes" />
                    
                </StackPanel>

                <StackPanel
                    Grid.Column="1"
                    Margin="20,0,0,0"
                    VerticalAlignment="Center"
                    Orientation="Horizontal">
                    <ui:SymbolIcon
                        Margin="0,0,5,0"
                        Foreground="White"
                        Symbol="Person24" />

                    <TextBlock Foreground="White" Height="20">
                        <Run Text="{Binding EmployeConnecte.Nom}" />
                        <Run Text="{Binding EmployeConnecte.Prenom}" />
                        <Run Text=" | " />
                        <Run Text="{Binding EmployeConnecte.UnRole.Nom}" />
                    </TextBlock>
                    <TextBlock
                        Margin="0,0,15,0"
                        VerticalAlignment="Center"
                        Foreground="White"
                        Opacity="0.8"
                        Text="{Binding EmployeConnecte.Role}" />
                    <ui:Button
                        x:Name="DeconnexionButton"
                        Appearance="Transparent"
                        Click="DeconnexionButton_Click"
                        Command="{Binding LogoutCommand}"
                        Content="Déconnexion"
                        Foreground="White" />
                    <ui:Button x:Name="CloseButton"
                          Content="✕"
                          Width="32"
                          Height="32"
                          HorizontalAlignment="Right"
                          VerticalAlignment="Top"
                          Background="Transparent"
                          Foreground="White"
                          BorderThickness="0"
                          FontSize="14"
                          Click="CloseButton_Click" Margin="20,0,0,0"/>
                </StackPanel>
            </Grid>
        </Border>

        <!--  Navigation et contenu principal  -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="250" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!--  Menu de navigation  -->
            <Border
                Grid.Column="0"
                Background="#FFF5F5F5"
                BorderBrush="#FFEEEEEE"
                BorderThickness="0,0,1,0">

                <ui:NavigationView
                    x:Name="NavigationView"
                    IsBackButtonVisible="Collapsed"
                    OpenPaneLength="250"
                    PaneDisplayMode="Left">

                    <ui:NavigationView.MenuItems>

                        <!--  Menu Commercial  -->
                        <ui:NavigationViewItem x:Name="butCommande"
                            Content="Commandes"
                            Icon="{ui:SymbolIcon Cart24}"
                            Tag="commandes" Click="butCommande_Click">
                            <ui:NavigationViewItem.Style>
                                <Style TargetType="ui:NavigationViewItem">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding EstCommercial}" Value="True">
                                            <Setter Property="Visibility" Value="Visible" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </ui:NavigationViewItem.Style>
                        </ui:NavigationViewItem>

                        <ui:NavigationViewItem x:Name="butMesCommandes"
                            Content="Mes Commandes"
                            Icon="{ui:SymbolIcon ClipboardTask24}"
                            Tag="mescommandes" Click="butMesCommandes_Click">
                            <ui:NavigationViewItem.Style>
                                <Style TargetType="ui:NavigationViewItem">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding EstCommercial}" Value="True">
                                            <Setter Property="Visibility" Value="Visible" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </ui:NavigationViewItem.Style>
                        </ui:NavigationViewItem>

                        <ui:NavigationViewItem x:Name="butRevendeurs"
                            Content="Revendeurs"
                            Icon="{ui:SymbolIcon StoreMicrosoft24}"
                            Tag="revendeurs" Click="butRevendeurs_Click">
                            <ui:NavigationViewItem.Style>
                                <Style TargetType="ui:NavigationViewItem">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding EstCommercial}" Value="True">
                                            <Setter Property="Visibility" Value="Visible" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </ui:NavigationViewItem.Style>
                        </ui:NavigationViewItem>

                        <!--  Menu commun  -->
                        <ui:NavigationViewItem x:Name="butProduits"
                            Content="Produits"
                            Icon="{ui:SymbolIcon Box24}"
                            Tag="produits" Click="butProduits_Click" />

                        <!--  Menu Responsable Production  -->
                        <ui:NavigationViewItem x:Name="butGestionProduits"
                            Content="Gestion Produits"
                            Icon="{ui:SymbolIcon Settings24}"
                            Tag="gestionproduits" Click="butGestionProduits_Click">
                            <ui:NavigationViewItem.Style>
                                <Style TargetType="ui:NavigationViewItem">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding EstResponsable}" Value="True">
                                            <Setter Property="Visibility" Value="Visible" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </ui:NavigationViewItem.Style>
                        </ui:NavigationViewItem>

                    </ui:NavigationView.MenuItems>
                </ui:NavigationView>
            </Border>

            <Border Grid.Column="1" Background="White" Height="728">
                <ContentControl x:Name="vueActuelle"/>
            </Border>


        </Grid>
    </Grid>
</ui:FluentWindow>